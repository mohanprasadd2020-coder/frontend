<!doctype html>
<html lang="en">

<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Edumorph - Transform Your Learning</title>
  <style>
    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }

    body {
      font-family: "Segoe UI", Tahoma, Geneva, Verdana, sans-serif;
      background: linear-gradient(135deg,
          #3b1d5a,

          #12002b 50%,
          #1a2a6c 100%);
      color: #fff;
      min-height: 100vh;
      overflow-x: hidden;
    }

    .bg-animation {
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      z-index: 0;
      overflow: hidden;
      pointer-events: none;
    }

    .floating-icon {
      position: absolute;
      opacity: 0.08;
      animation: float 20s infinite;
      font-size: 80px;
    }

    @keyframes float {

      0%,
      100% {
        transform: translateY(0) rotate(0deg);
      }

      50% {
        transform: translateY(-40px) rotate(180deg);
      }
    }

    .auth-container {
      display: flex;
      justify-content: center;
      align-items: center;
      min-height: 100vh;
      padding: 20px;
    }

    .auth-card {
      position: relative;
      z-index: 10;
      background: rgba(255, 255, 255, 0.06);
      backdrop-filter: blur(20px);
      border: 1px solid rgba(99, 102, 241, 0.3);
      border-radius: 25px;
      padding: 60px 50px;
      width: 100%;
      max-width: 450px;
      box-shadow: 0 30px 80px rgba(0, 0, 0, 0.6);
    }

    .auth-logo {
      display: flex;
      align-items: center;
      justify-content: center;
      gap: 15px;
      margin-bottom: 40px;
      font-size: 32px;
      color: #6366f1;
    }

    .auth-logo div {
      width: 55px;
      height: 55px;
      background: linear-gradient(135deg, #6366f1, #a855f7);
      border-radius: 12px;
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 32px;
    }

    .auth-card h2 {
      text-align: center;
      font-size: 32px;
      margin-bottom: 10px;
      color: #fff;
    }

    .auth-card .subtitle {
      text-align: center;
      color: #aaa;
      margin-bottom: 35px;
      font-size: 14px;
    }

    .form-group {
      margin-bottom: 20px;
    }

    .form-row {
      display: grid;
      grid-template-columns: 1fr 1fr;
      gap: 15px;
    }

    .input-wrapper {
      position: relative;
    }

    .input-wrapper input {
      width: 100%;
      padding: 14px 15px 14px 45px;
      background: rgba(255, 255, 255, 0.06);
      border: 1px solid rgba(99, 102, 241, 0.3);
      border-radius: 10px;
      color: #fff;
      font-size: 15px;
      transition: all 0.3s ease;
    }

    .input-wrapper input::placeholder {
      color: #999;
    }

    .input-wrapper input:focus {
      outline: none;
      border-color: #6366f1;
      background: rgba(255, 255, 255, 0.06);
      box-shadow: 0 0 20px rgba(99, 102, 241, 0.2);
    }

    .input-icon {
      position: absolute;
      left: 15px;
      top: 50%;
      transform: translateY(-50%);
      font-size: 18px;
    }

    .btn {
      padding: 14px;
      border: none;
      border-radius: 10px;
      font-size: 16px;
      font-weight: 700;
      cursor: pointer;
      transition: all 0.3s ease;
    }

    .btn-primary {
      background: linear-gradient(135deg, #6366f1, #a855f7);
      color: #fff;
      width: 100%;
    }

    .btn-primary:hover {
      transform: translateY(-2px);
      box-shadow: 0 15px 40px rgba(99, 102, 241, 0.4);
    }

    .auth-options {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-top: 15px;
      font-size: 13px;
    }

    .checkbox {
      display: flex;
      align-items: center;
      gap: 8px;
      cursor: pointer;
    }

    .forgot-link {
      color: #6366f1;
      text-decoration: none;
      cursor: pointer;
    }

    .auth-switch {
      text-align: center;
      margin-top: 25px;
      font-size: 14px;
      color: #aaa;
    }

    .auth-switch a {
      color: #6366f1;
      text-decoration: none;
      font-weight: 700;
      cursor: pointer;
    }

    .hidden {
      display: none !important;
    }

    .dashboard {
      display: none;
    }

    .dashboard.active {
      display: block;
    }

    .sidebar {
      position: fixed;
      left: 0;
      top: 0;
      width: 260px;
      height: 100vh;
      background: rgba(255, 255, 255, 0.06);
      backdrop-filter: blur(18px);
      border-right: 1px solid rgba(99, 102, 241, 0.2);
      padding: 30px 20px;
      z-index: 100;
      overflow-y: auto;
      box-shadow: 0 0 45px rgba(99, 102, 241, 0.2);
    }

    .sidebar-logo {
      display: flex;
      align-items: center;
      gap: 12px;
      margin-bottom: 30px;
      font-size: 22px;
      font-weight: 700;
      color: #6366f1;
    }

    .sidebar-logo div {
      width: 40px;
      height: 40px;
      background: linear-gradient(135deg, #6366f1, #a855f7);
      border-radius: 8px;
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 22px;
    }

    /* User Profile Section in Sidebar */
    .sidebar-user-section {
      background: rgba(255, 255, 255, 0.06);
      padding: 20px;
      border-radius: 12px;
      margin-bottom: 25px;
      border: 1px solid rgba(99, 102, 241, 0.2);
    }

    .sidebar-user-avatar {
      width: 80px;
      height: 80px;
      background: linear-gradient(135deg, #6366f1, #a855f7);
      border-radius: 50%;
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 36px;
      margin: 0 auto 15px;
      border: 3px solid rgba(99, 102, 241, 0.3);
      box-shadow: 0 5px 15px rgba(99, 102, 241, 0.3);
    }

    .sidebar-user-name {
      text-align: center;
      font-size: 16px;
      font-weight: 700;
      color: #fff;
      margin-bottom: 5px;
    }

    .sidebar-user-role {
      text-align: center;
      font-size: 12px;
      color: rgba(255, 255, 255, 0.6);
      text-transform: uppercase;
      letter-spacing: 0.5px;
      margin-bottom: 15px;
    }

    .sidebar-user-details {
      display: grid;
      gap: 12px;
      padding-top: 15px;
      border-top: 1px solid rgba(99, 102, 241, 0.2);
    }

    .sidebar-detail-row {
      font-size: 12px;
    }

    .sidebar-detail-label {
      color: rgba(255, 255, 255, 0.5);
      text-transform: uppercase;
      letter-spacing: 0.5px;
      font-weight: 600;
      margin-bottom: 4px;
    }

    .sidebar-detail-value {
      color: #6366f1;
      font-weight: 600;
      word-break: break-word;
      font-size: 11px;
    }

    .sidebar-menu {
      list-style: none;
    }

    .sidebar-menu li {
      margin-bottom: 8px;
    }

    .sidebar-menu a {
      display: flex;
      align-items: center;
      gap: 15px;
      padding: 14px 18px;
      color: #bbb;
      text-decoration: none;
      border-radius: 10px;
      transition: all 0.3s ease;
      cursor: pointer;
      font-size: 15px;
    }

    .sidebar-menu a:hover {
      background: rgba(99, 102, 241, 0.15);
      color: #6366f1;
    }

    .sidebar-menu a.active {
      background: rgba(99, 102, 241, 0.25);
      color: #6366f1;
      border-left: 3px solid #6366f1;
      padding-left: 15px;
    }

    .main-content {
      margin-left: 260px;
      padding: 30px;
      min-height: 100vh;
    }

    .menu-toggle {
      display: none;
      position: fixed;
      top: 20px;
      left: 20px;
      background: linear-gradient(135deg, #6366f1, #a855f7);
      border: none;
      color: #fff;
      width: 50px;
      height: 50px;
      border-radius: 10px;
      font-size: 24px;
      cursor: pointer;
      z-index: 101;
      box-shadow: 0 10px 30px rgba(99, 102, 241, 0.4);
      transition: all 0.3s ease;
    }

    .menu-toggle:hover {
      transform: scale(1.1);
    }

    .sidebar.active {
      transform: translateX(0);
    }

    .topbar {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-bottom: 30px;
      padding: 20px 30px;
      background: rgba(255, 255, 255, 0.06);
      backdrop-filter: blur(15px);
      border: 1px solid rgba(99, 102, 241, 0.2);
      border-radius: 15px;
    }

    .welcome-section h1 {
      font-size: 28px;
      margin-bottom: 5px;
    }

    .welcome-section p {
      color: #aaa;
      font-size: 14px;
    }

    .user-stats {
      display: flex;
      align-items: center;
      gap: 20px;
    }

    .stat-badge {
      background: linear-gradient(135deg,
          #1a1a2e 0%,
          #16213e 50%,
          #0f3460 100%);
      padding: 12px 25px;
      border-radius: 20px;
      font-weight: 700;
      display: flex;
      align-items: center;
      gap: 8px;
    }

    .user-avatar {
      width: 50px;
      height: 50px;
      background: linear-gradient(135deg, #6366f1, #a855f7);
      border-radius: 50%;
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 24px;
      border: 2px solid rgba(99, 102, 241, 0.3);
      cursor: pointer;
      transition: all 0.3s ease;
      position: relative;
      z-index: 6000;
      overflow: visible;
    }

    .user-avatar:hover {
      transform: scale(1.1);
      box-shadow: 0 0 20px rgba(99, 102, 241, 0.5);
    }

    .user-profile-dropdown {
      position: absolute;
      top: 70px;
      right: 0;
      background: rgba(255, 255, 255, 0.06);
      backdrop-filter: blur(20px);
      border: 1px solid rgba(99, 102, 241, 0.3);
      border-radius: 15px;
      width: 320px;
      padding: 20px;
      box-shadow: 0 15px 50px rgba(0, 0, 0, 0.5);
      display: none;
      position: absolute;
      z-index: 9999;
      animation: slideDown 0.3s ease;
      pointer-events: none;
    }

    .user-profile-dropdown.active {
      display: block;
      pointer-events: auto;
    }

    @keyframes slideDown {
      from {
        opacity: 0;
        transform: translateY(-10px);
      }

      to {
        opacity: 1;
        transform: translateY(0);
      }
    }

    .profile-header {
      display: flex;
      align-items: center;
      gap: 15px;
      padding-bottom: 15px;
      border-bottom: 1px solid rgba(99, 102, 241, 0.2);
      margin-bottom: 15px;
    }

    .profile-avatar-large {
      width: 60px;
      height: 60px;
      background: linear-gradient(135deg, #6366f1, #a855f7);
      border-radius: 50%;
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 32px;
      border: 2px solid rgba(99, 102, 241, 0.3);
    }

    .profile-info h3 {
      font-size: 16px;
      color: #fff;
      margin-bottom: 3px;
    }

    .profile-info p {
      font-size: 13px;
      color: #999;
    }

    .profile-details {
      display: grid;
      gap: 12px;
      margin-bottom: 15px;
    }

    .detail-item {
      padding: 10px;
      background: rgba(255, 255, 255, 0.06);
      border-radius: 8px;
      font-size: 13px;
    }

    .detail-item label {
      color: #999;
      display: block;
      margin-bottom: 3px;
    }

    .detail-item span {
      color: #6366f1;
      font-weight: 600;
    }

    .profile-actions {
      display: grid;
      grid-template-columns: 1fr 1fr;
      gap: 10px;
      padding-top: 15px;
      border-top: 1px solid rgba(99, 102, 241, 0.2);
    }

    .profile-actions button {
      padding: 8px;
      background: rgba(99, 102, 241, 0.2);
      border: 1px solid rgba(99, 102, 241, 0.3);
      border-radius: 8px;
      color: #6366f1;
      cursor: pointer;
      font-size: 12px;
      font-weight: 600;
      transition: all 0.3s ease;
    }

    .profile-actions button:hover {
      background: rgba(99, 102, 241, 0.4);
      border-color: #6366f1;
    }

    .files-modal {
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background: rgba(0, 0, 0, 0.6);
      backdrop-filter: blur(5px);
      display: none;
      align-items: center;
      justify-content: center;
      z-index: 2000;
    }

    .files-modal.active {
      display: flex;
    }

    .files-modal-content {
      background: rgba(255, 255, 255, 0.06);
      backdrop-filter: blur(20px);
      border: 1px solid rgba(99, 102, 241, 0.3);
      border-radius: 20px;
      padding: 40px;
      width: 90%;
      max-width: 600px;
      max-height: 80vh;
      overflow-y: auto;
      box-shadow: 0 25px 80px rgba(0, 0, 0, 0.7);
      animation: slideUp 0.3s ease;
    }

    @keyframes slideUp {
      from {
        opacity: 0;
        transform: translateY(30px);
      }

      to {
        opacity: 1;
        transform: translateY(0);
      }
    }

    .files-modal-header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-bottom: 30px;
      padding-bottom: 20px;
      border-bottom: 2px solid rgba(99, 102, 241, 0.3);
    }

    .files-modal-header h2 {
      margin: 0;
      font-size: 28px;
      color: #fff;
    }

    .files-modal-close {
      background: none;
      border: none;
      color: #6366f1;
      font-size: 28px;
      cursor: pointer;
      transition: all 0.3s ease;
    }

    .files-modal-close:hover {
      transform: scale(1.2);
      color: #ff6b6b;
    }

    .files-modal-list {
      display: grid;
      gap: 15px;
    }

    .files-modal-item {
      padding: 20px;
      background: rgba(255, 255, 255, 0.06);
      border: 1px solid rgba(99, 102, 241, 0.3);
      border-radius: 12px;
      display: flex;
      justify-content: space-between;
      align-items: center;
      transition: all 0.3s ease;
    }

    .files-modal-item:hover {
      background: rgba(255, 255, 255, 0.06);
      border-color: rgba(99, 102, 241, 0.6);
    }

    .file-details {
      flex: 1;
    }

    .file-name {
      color: #fff;
      font-weight: 700;
      margin-bottom: 8px;
      font-size: 16px;
    }

    .file-meta {
      color: #999;
      font-size: 13px;
      line-height: 1.6;
    }

    .content-section {
      display: none;
    }

    .content-section.active {
      display: block;
    }

    .card-grid {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
      gap: 25px;
      margin-bottom: 30px;
    }

    .card {
      background: rgba(255, 255, 255, 0.06);
      backdrop-filter: blur(15px);
      border: 1px solid rgba(99, 102, 241, 0.2);
      border-radius: 15px;
      padding: 30px;
      transition: all 0.3s ease;
      position: relative;
      z-index: 1;
    }

    .card:hover {
      transform: translateY(-8px);
      box-shadow: 0 20px 60px rgba(99, 102, 241, 0.2);
      border-color: rgba(99, 102, 241, 0.5);
    }

    .card h3 {
      color: #6366f1;
      margin-bottom: 20px;
      font-size: 22px;
    }

    .progress-bar {
      width: 100%;
      height: 10px;
      background: rgba(255, 255, 255, 0.06);
      border-radius: 10px;
      overflow: hidden;
      margin-bottom: 20px;
    }

    .progress-fill {
      height: 100%;
      background: linear-gradient(90deg, #6366f1, #2ecc71);
      transition: width 0.3s ease;
    }

    .upload-area {
      border: 3px dashed rgba(99, 102, 241, 0.4);
      border-radius: 15px;
      padding: 80px 40px;
      text-align: center;
      cursor: pointer;
      transition: all 0.3s ease;
    }

    .upload-area:hover {
      border-color: #6366f1;
      background: rgba(99, 102, 241, 0.1);
    }

    .upload-area input {
      display: none;
    }

    .upload-area-icon {
      font-size: 80px;
      margin-bottom: 20px;
    }

    .language-grid,
    .age-grid {
      display: grid;
      grid-template-columns: repeat(3, 1fr);
      gap: 15px;
      margin-top: 20px;
    }

    .option-btn {
      padding: 15px;
      background: rgba(255, 255, 255, 0.06);
      border: 1px solid rgba(99, 102, 241, 0.3);
      border-radius: 10px;
      color: #fff;
      cursor: pointer;
      transition: all 0.3s ease;
      font-weight: 600;
    }

    .option-btn:hover {
      background: rgba(99, 102, 241, 0.2);
      border-color: #6366f1;
    }

    .option-btn.selected {
      background: linear-gradient(135deg, #6366f1, #a855f7);
      border-color: #6366f1;
    }

    .chatbot-widget {
      position: fixed;
      bottom: 30px;
      right: 30px;
      z-index: 999;
    }

    .chatbot-toggle {
      width: 65px;
      height: 65px;
      background: linear-gradient(135deg, #6366f1, #a855f7);
      border: none;
      border-radius: 50%;
      color: #fff;
      font-size: 28px;
      cursor: pointer;
      box-shadow: 0 10px 35px rgba(99, 102, 241, 0.4);
      transition: all 0.3s ease;
      display: flex;
      align-items: center;
      justify-content: center;
      animation: float-bot 3s ease-in-out infinite;
    }

    .chatbot-toggle:hover {
      transform: scale(1.15);
      box-shadow: 0 15px 45px rgba(99, 102, 241, 0.6);
      animation: none;
    }

    @keyframes float-bot {

      0%,
      100% {
        transform: translateY(0px);
      }

      50% {
        transform: translateY(-15px);
      }
    }

    .chatbot-box {
      position: absolute;
      bottom: 80px;
      right: 0;
      width: 380px;
      height: 550px;
      background: rgba(255, 255, 255, 0.06);
      backdrop-filter: blur(20px);
      border: 1px solid rgba(99, 102, 241, 0.3);
      border-radius: 20px;
      display: none;
      flex-direction: column;
      box-shadow: 0 20px 70px rgba(0, 0, 0, 0.6);
      overflow: hidden;
    }

    .chatbot-box.active {
      display: flex;
    }

    .chatbot-header {
      padding: 20px;
      background: linear-gradient(135deg,
          rgba(99, 102, 241, 0.3),
          rgba(53, 122, 189, 0.2));
      border-bottom: 1px solid rgba(99, 102, 241, 0.2);
      display: flex;
      justify-content: space-between;
      align-items: center;
      gap: 15px;
    }

    .chatbot-title {
      font-weight: 700;
      font-size: 16px;
    }

    .chatbot-close {
      background: none;
      border: none;
      color: #6366f1;
      cursor: pointer;
      font-size: 20px;
    }

    .chatbot-messages {
      flex: 1;
      padding: 20px;
      overflow-y: auto;
      display: flex;
      flex-direction: column;
      gap: 12px;
    }

    .message {
      padding: 12px 16px;
      border-radius: 12px;
      max-width: 80%;
      animation: slideIn 0.3s ease;
    }

    @keyframes slideIn {
      from {
        opacity: 0;
        transform: translateY(10px);
      }

      to {
        opacity: 1;
        transform: translateY(0);
      }
    }

    .message.user {
      background: linear-gradient(135deg, #6366f1, #a855f7);
      align-self: flex-end;
      border-bottom-right-radius: 4px;
    }

    .message.bot {
      background: rgba(99, 102, 241, 0.2);
      align-self: flex-start;
      border-bottom-left-radius: 4px;
    }

    .chatbot-input-area {
      padding: 15px;
      border-top: 1px solid rgba(99, 102, 241, 0.2);
      display: flex;
      gap: 10px;
    }

    .chatbot-input-area input {
      flex: 1;
      padding: 12px 15px;
      background: rgba(255, 255, 255, 0.06);
      border: 1px solid rgba(99, 102, 241, 0.3);
      border-radius: 8px;
      color: #fff;
      font-size: 14px;
    }

    .chatbot-input-area input::placeholder {
      color: #888;
    }

    .chatbot-send {
      background: linear-gradient(135deg, #6366f1, #a855f7);
      border: none;
      color: #fff;
      cursor: pointer;
      padding: 12px 18px;
      border-radius: 8px;
      font-weight: 700;
    }

    .file-item {
      padding: 20px;
      background: rgba(255, 255, 255, 0.06);
      border-radius: 10px;
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-bottom: 15px;
      border-left: 4px solid #6366f1;
    }

    .file-info h4 {
      color: #fff;
      margin-bottom: 5px;
    }

    .file-info p {
      color: #999;
      font-size: 13px;
    }

    .file-btn {
      padding: 8px 16px;
      background: linear-gradient(135deg, #6366f1, #a855f7);
      border: none;
      border-radius: 6px;
      color: #fff;
      cursor: pointer;
      font-weight: 600;
      font-size: 13px;
    }

    @media (max-width: 768px) {
      .menu-toggle {
        display: flex;
        align-items: center;
        justify-content: center;
      }

      .sidebar {
        transform: translateX(-100%);
        transition: transform 0.3s ease;
        width: 70vw;
        max-width: 260px;
        z-index: 99;
        box-shadow: none;
      }

      .sidebar.active {
        transform: translateX(0);
        z-index: 99;
        box-shadow: 5px 0 15px rgba(0, 0, 0, 0.5);
      }

      .sidebar.active::after {
        content: "";
        position: fixed;
        top: 0;
        right: -100vw;
        left: 260px;
        bottom: 0;
        background: rgba(0, 0, 0, 0.3);
        z-index: -1;
        pointer-events: auto;
      }

      .main-content {
        margin-left: 0;
        padding: 80px 20px 30px 20px;
        position: relative;
        z-index: 1;
        pointer-events: auto;
      }

      .topbar {
        flex-direction: column;
        gap: 15px;
        position: relative;
        z-index: 1;
        margin-top: 20px;
        pointer-events: auto;
      }

      .welcome-section {
        z-index: 1;
        pointer-events: auto;
      }

      .language-grid,
      .age-grid {
        grid-template-columns: 1fr 1fr;
      }
    }

    /* Sidebar Logo Section */
    .sidebar-logo {
      display: flex;
      align-items: center;
      gap: 12px;
      padding: 16px 20px;
      border-bottom: 1px solid rgba(255, 255, 255, 0.1);
    }

    /* Logo Image */
    .sidebar-logo img {
      width: 50px;
      height: 50px;
      object-fit: contain;
      border-radius: 50px;
      background: #b80fd2d9;
      padding: 4px;
    }

    /* Logo Text */
    .sidebar-logo span {
      font-size: 20px;
      font-weight: 600;
      letter-spacing: 0.5px;
      color: #ffffff;
      font-family: "Segoe UI", system-ui, sans-serif;
    }

    /* Mobile Responsive */
    @media (max-width: 768px) {
      .sidebar-logo {
        justify-content: center;
      }

      .sidebar-logo span {
        display: none;
        /* Hide text on small screens */
      }
    }
  </style>
</head>

<body>
  <div class="bg-animation">
    <div class="floating-icon" style="top: 10%; left: 10%">üìö</div>
    <div class="floating-icon" style="top: 20%; right: 15%">üéì</div>
    <div class="floating-icon" style="bottom: 15%; left: 20%">‚úèÔ∏è</div>
    <div class="floating-icon" style="bottom: 25%; right: 10%">üéØ</div>
    <div class="floating-icon" style="top: 50%; left: 50%">üß†</div>
  </div>

  <!-- Dashboard Section -->
  <div id="dashboardSection" class="dashboard active">
    <!-- Mobile Menu Toggle Button -->
    <button class="menu-toggle" id="menuToggle" onclick="toggleSidebar()">
      ‚ò∞
    </button>

    <div class="sidebar" id="sidebar">
      <div class="sidebar-logo">
        <div>
          <img src="https://logowik.com/content/uploads/images/education-student-owl-design1717061329.logowik.com.webp"
            alt="Edumorph Logo" />
        </div>
        <span style="font-style: italic; font-size: 25px">Edumorph</span>
      </div>

      <ul class="sidebar-menu">
        <li>
          <a class="active" onclick="showSection('home')">üè† Dashboard</a>
        </li>
        <li><a onclick="showSection('library')">üìö My Library</a></li>
        <li><a onclick="showSection('settings')">‚öôÔ∏è Settings</a></li>
        <li><a onclick="toggleChatbot()">üí¨ AI Assistant</a></li>
        <li><a onclick="showSection('user-avatar')">üë±üèª User Profile</a></li>
        <li><a onclick="logout()">üö™ Sign Out</a></li>
      </ul>
    </div>

    <div class="main-content">
      <div class="topbar">
        <div class="welcome-section">
          <h1>Welcome, <span id="userName">Student</span>..‚ù§Ô∏è</h1>
          <p>Keep up your learning momentum</p>
        </div>
        <div class="user-stats">
          <div class="stat-badge">
            üî• <span id="streak">23</span> Day Streak
          </div>
          <!-- <div
              class="user-avatar"
              id="userAvatarBtn"
              onclick="toggleProfileDropdown()"
            >
              üë§
            </div> -->
          <!-- Profile Dropdown -->
          <div class="user-profile-dropdown" id="userProfileDropdown" aria-hidden="true">
            <div class="profile-header">
              <div class="profile-avatar-large">üë§</div>
              <div class="profile-info">
                <h3 id="profileName">Student</h3>
                <p id="profileEmail">student@edumorph.com</p>
              </div>
            </div>

            <div class="profile-details">
              <div class="detail-item">
                <label>User ID</label>
                <span id="profileId">EDU-2026-001</span>
              </div>
              <div class="detail-item">
                <label>Member Since</label>
                <span id="profileJoined">January 2026</span>
              </div>
              <div class="detail-item">
                <label>Learning Points</label>
                <span id="profilePoints">2,450 XP</span>
              </div>
              <div class="detail-item">
                <label>Generated</label>
                <span id="profileCourses">5</span>
              </div>
              <div class="detail-item">
                <!-- App language moved to Settings -->
              </div>
            </div>

            <div class="profile-actions">
              <button onclick="showSection('settings')">View Profile</button>
              <button onclick="logout()">Sign Out</button>
            </div>
          </div>
        </div>
      </div>

      <!-- Home Section -->
      <div id="homeSection" class="content-section active">
        <!-- File Upload Section - Only in Home/Dashboard -->
        <div class="card" style="margin-bottom: 30px">
          <h3>üì§ Upload Your Learning Materials</h3>
          <div class="upload-area" onclick="document.getElementById('fileInput').click()">
            <input type="file" id="fileInput" accept=".pdf,image/*" onchange="handleFileUpload(event)" />
            <div class="upload-area-icon">üìÅ</div>
            <h3 style="color: #fff">Drop PDF or Image Here</h3>
            <p style="color: #999; margin-top: 10px">
              or click to browse your device
            </p>
          </div>

          <!-- Generate Button Section -->
          <div id="generateSection" style="margin-top: 20px; display: none">
            <div style="
                  padding: 20px;
                  background: rgba(99, 102, 241, 0.1);
                  border: 1px solid rgba(99, 102, 241, 0.3);
                  border-radius: 10px;
                ">
              <p style="color: #6366f1; font-weight: 600; margin-bottom: 15px">
                üìÑ File uploaded:
                <span id="uploadedFileName" style="color: #fff"></span>
              </p>
              <button class="btn btn-primary" onclick="generateContent()" style="width: 100%; padding: 14px">
                ‚ö° Generate Learning Content
              </button>
            </div>
          </div>

          <!-- Uploaded Files Display Section -->
          <div id="uploadedFilesSection" style="margin-top: 30px; display: none">
            <h3 style="color: #6366f1; margin-bottom: 20px; font-size: 20px">
              üìÅ Uploaded Files
            </h3>
            <div id="uploadedFilesList" style="display: grid; gap: 15px"></div>
          </div>
        </div>
        <div class="card-grid">
          <div class="card">
            <h3>üìä Your Progress</h3>
            <div class="progress-bar">
              <div class="progress-fill" style="width: 65%"></div>
            </div>
            <p>65% of weekly goal completed</p>
            <p style="margin-top: 8px; color: #999; font-size: 14px">
              3 lessons completed
            </p>
          </div>
          <div class="card">
            <h3>üéØ Quiz Average</h3>
            <div style="
                  font-size: 48px;
                  color: #6366f1;
                  margin: 20px 0;
                  font-weight: 700;
                ">
              87%
            </div>
            <p>Average across all quizzes</p>
          </div>
          <div class="card">
            <h3>‚è±Ô∏è Learning Time</h3>
            <div style="
                  font-size: 48px;
                  color: #6366f1;
                  margin: 20px 0;
                  font-weight: 700;
                ">
              12.5h
            </div>
            <p>Total time this month</p>
          </div>
        </div>

        <div class="card">
          <h3>üìñ Recent Content</h3>
          <div style="margin-top: 20px; display: grid; gap: 12px">
            <div style="
                  padding: 15px;
                  background: rgba(255, 255, 255, 0.06);
                  border-radius: 10px;
                  border-left: 4px solid #2ecc71;
                ">
              <span style="font-weight: 700">Machine Learning Basics</span>
              <span style="float: right; color: #2ecc71; font-weight: 700">‚úì Done</span>
            </div>
            <div style="
                  padding: 15px;
                  background: rgba(255, 255, 255, 0.06);
                  border-radius: 10px;
                  border-left: 4px solid #f39c12;
                ">
              <span style="font-weight: 700">Data Structures</span>
              <span style="float: right; color: #f39c12; font-weight: 700">‚Üª Ongoing</span>
            </div>
            <div style="
                  padding: 15px;
                  background: rgba(255, 255, 255, 0.06);
                  border-radius: 10px;
                  border-left: 4px solid #999;
                ">
              <span style="font-weight: 700">Web Development</span>
              <span style="float: right; color: #999">Not Started</span>
            </div>
          </div>
        </div>
      </div>

      <!-- Library Section -->
      <div id="librarySection" class="content-section">
        <div class="card">
          <h3>üìö My Learning Library</h3>
          <div style="margin-top: 20px; display: grid; gap: 15px">
            <div class="file-item">
              <div class="file-info">
                <h4>Introduction to ML</h4>
                <p>PDF ‚Ä¢ 15 MB ‚Ä¢ Last accessed 2 days ago</p>
              </div>
              <button class="file-btn">‚¨áÔ∏è Download</button>
            </div>
            <div class="file-item">
              <div class="file-info">
                <h4>Data Structures Video</h4>
                <p>MP4 ‚Ä¢ 250 MB ‚Ä¢ Last accessed 1 week ago</p>
              </div>
              <button class="file-btn">‚ñ∂Ô∏è Play</button>
            </div>
            <div class="file-item">
              <div class="file-info">
                <h4>Quiz Results</h4>
                <p>PDF Report ‚Ä¢ 2 MB ‚Ä¢ Generated today</p>
              </div>
              <button class="file-btn">üìÑ View</button>
            </div>
          </div>
        </div>
      </div>

      <!-- Settings Section -->
      <div id="settingsSection" class="content-section">
        <div class="card">
          <h3>‚öôÔ∏è Account Settings</h3>
          <div style="margin-top: 25px; display: grid; gap: 20px">
            <div>
              <label style="display: block; margin-bottom: 10px; color: #999">Full Name</label>
              <input type="text" value="John Student" style="
                    width: 100%;
                    padding: 12px;
                    background: rgba(255, 255, 255, 0.06);
                    border: 1px solid rgba(99, 102, 241, 0.3);
                    border-radius: 8px;
                    color: #fff;
                  " />
            </div>
            <div>
              <label style="display: block; margin-bottom: 10px; color: #999">Email</label>
              <input type="email" value="john@example.com" style="
                    width: 100%;
                    padding: 12px;
                    background: rgba(255, 255, 255, 0.06);
                    border: 1px solid rgba(99, 102, 241, 0.3);
                    border-radius: 8px;
                    color: #fff;
                  " />
            </div>
            <div>
              <label style="display: block; margin-bottom: 10px; color: #999">Preferred Language</label>
              <select id="settingsLanguageSelect" onchange="setAppLanguage(this.value)" style="
                    width: 100%;
                    padding: 12px;
                    background: rgba(255, 255, 255, 0.06);
                    border: 1px solid rgba(99, 102, 241, 0.3);
                    border-radius: 8px;
                    color: #fff;
                    box-shadow: 0 0 20px rgba(99, 102, 241, 0.3);
                  ">
                <option value="en" style="background: #1a1a2e; color: #fff;">English</option>
                <option value="ka" style="background: #1a1a2e; color: #fff;">kanadam</option>
                <option value="ta" style="background: #1a1a2e; color: #fff;">Tamil</option>
                <option value="hi" style="background: #1a1a2e; color: #fff;">Hindi</option>
                <option value="te" style="background: #1a1a2e; color: #fff;">telugu</option>
              </select>
            </div>
            <button class="btn btn-primary" style="width: 200px">
              üíæ Save Changes
            </button>
          </div>
        </div>

        <div class="card" style="margin-top: 25px">
          <h3>üîí Security</h3>
          <button class="btn btn-primary" style="max-width: 300px; margin-top: 20px">
            Change Password
          </button>
          <button class="btn btn-primary" style="max-width: 300px; margin-top: 12px">
            Enable Two-Factor Auth
          </button>
        </div>
      </div>
      <!-- User Profile Page Section -->
      <div id="userProfileSection" class="content-section">
        <div class="card">
          <div style="
                display: grid;
                grid-template-columns: 1fr 2fr;
                gap: 20px;
                align-items: start;
              ">
            <div style="text-align: center">
              <div class="profile-avatar-large" id="profilePageAvatar" style="margin: 0 auto">
                üë§
              </div>
              <div style="
                    margin-top: 12px;
                    color: #fff;
                    font-weight: 700;
                    font-size: 18px;
                  " id="profilePageName">
                Student
              </div>
              <div style="
                    color: rgba(255, 255, 255, 0.6);
                    font-size: 13px;
                    margin-top: 6px;
                  " id="profilePageRole">
                Learner
              </div>
              <div style="margin-top: 16px; display: grid; gap: 8px">
                <div style="
                      background: rgba(255, 255, 255, 0.06);
                      padding: 10px;
                      border-radius: 8px;
                    ">
                  <div style="font-size: 12px; color: #999">User ID</div>
                  <div style="color: #6366f1; font-weight: 700" id="profilePageId">
                    EDU-2026-001
                  </div>
                </div>
                <div style="
                      background: rgba(255, 255, 255, 0.06);
                      padding: 10px;
                      border-radius: 8px;
                    ">
                  <div style="font-size: 12px; color: #999">Member Since</div>
                  <div style="color: #6366f1; font-weight: 700" id="profilePageJoined">
                    January 2026
                  </div>
                </div>
              </div>
            </div>

            <div>
              <h3 style="color: #6366f1; margin-top: 0">Profile Overview</h3>
              

              <div style="display: flex; gap: 12px; margin-top: 18px">
                <div style="
                      flex: 1;
                      background: rgba(255, 255, 255, 0.06);
                      padding: 14px;
                      border-radius: 10px;
                    ">
                  <div style="font-size: 12px; color: #999">
                    Learning Points
                  </div>
                  <div id="profilePagePoints" style="color: #6366f1; font-weight: 700">
                    2,450 XP
                  </div>
                </div>
                <div style="
                      flex: 1;
                      background: rgba(255, 255, 255, 0.06);
                      padding: 14px;
                      border-radius: 10px;
                    ">
                  <div style="font-size: 12px; color: #999">
                    Generated
                  </div>
                  <div id="profilePageCourses" style="color: #6366f1; font-weight: 700">
                    5
                  </div>
                </div>
              </div>

              <div style="margin-top: 20px">
                <h4 style="color: #fff; margin: 0 0 8px 0">
                  üìö Recent Library
                </h4>
                <div id="profilePageLibraryList" style="
                      display: grid;
                      gap: 8px;
                      max-height: 160px;
                      overflow: auto;
                      padding-right: 6px;
                    ">
                  <!-- recent items will be injected here -->
                </div>
              </div>

              <div style="margin-top: 14px">
               
                <div style="display: flex; gap: 12px; align-items: center">
                  <!-- Quick Settings (moved to Settings page) -->
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>

  <!-- Files Modal -->
  <div class="files-modal" id="filesModal">
    <div class="files-modal-content">
      <div class="files-modal-header">
        <h2>üìÅ My Uploaded Files</h2>
        <button class="files-modal-close" onclick="closeFilesModal()">
          ‚úï
        </button>
      </div>
      <div class="files-modal-list" id="filesModalList">
        <!-- Files will be populated here -->
      </div>
    </div>
  </div>

  <!-- Chatbot Widget -->
  <div class="chatbot-widget">
    <div class="chatbot-box" id="chatbotBox">
      <div class="chatbot-header">
        <div style="display: flex; align-items: center; gap: 10px">
          <span style="font-size: 20px">ü§ñ</span>
          <div class="chatbot-title">Edu AI Assistant</div>
        </div>
        <button class="chatbot-close" onclick="toggleChatbot()">‚úï</button>
      </div>
      <div class="chatbot-messages" id="chatbotMessages">
        <div class="message bot">
          <div>
            Hi! üëã I'm your AI learning assistant. How can I help you today?
          </div>
        </div>
      </div>
      <div class="chatbot-input-area">
        <input type="text" id="chatbotInput" placeholder="Ask me anything..." onkeypress="handleChatMessage(event)" />
        <button class="chatbot-send" onclick="sendChatMessage()">Send</button>
      </div>
    </div>
    <button class="chatbot-toggle" id="chatbotToggle" onclick="toggleChatbot()">
      üí¨
    </button>
  </div>

  <script>
    // ===== GLOBAL VARIABLES =====
    let currentUser = null;
    let selectedLanguage = "en";
    let selectedAge = "11-15";
    let uploadedFiles = [];

    // ===== SIDEBAR & NAVIGATION =====
    function toggleSidebar() {
      const sidebar = document.getElementById("sidebar");
      if (sidebar) {
        sidebar.classList.toggle("active");
      }
    }

    function showSection(sectionName) {
      const sections = document.querySelectorAll(".content-section");
      sections.forEach((s) => s.classList.remove("active"));

      const sectionMap = {
        home: "homeSection",
        library: "librarySection",
        settings: "settingsSection",
        "user-avatar": "userProfileSection",
      };

      if (sectionMap[sectionName]) {
        const section = document.getElementById(sectionMap[sectionName]);
        if (section) {
          section.classList.add("active");
        }
      }

      document
        .querySelectorAll(".sidebar-menu a")
        .forEach((a) => a.classList.remove("active"));

      if (event && event.target) {
        event.target.classList.add("active");
      }

      // Close sidebar on mobile
      if (window.innerWidth <= 768) {
        const sidebar = document.getElementById("sidebar");
        if (sidebar) {
          sidebar.classList.remove("active");
        }
      }
    }

    // ===== FILE UPLOAD & MANAGEMENT =====
    function handleFileUpload(event) {
      const file = event.target.files[0];
      if (file) {
        const fileData = {
          name: file.name,
          size: (file.size / 1024 / 1024).toFixed(2),
          type: file.type,
          date: new Date().toLocaleDateString(),
          time: new Date().toLocaleTimeString(),
        };
        uploadedFiles.push(fileData);

        const fileName = document.getElementById("uploadedFileName");
        if (fileName) fileName.textContent = file.name;

        const generateSection = document.getElementById("generateSection");
        if (generateSection) generateSection.style.display = "block";

        displayUploadedFiles();
        event.target.value = "";
      }
    }

    function displayUploadedFiles() {
      const filesList = document.getElementById("uploadedFilesList");
      const section = document.getElementById("uploadedFilesSection");

      if (!filesList || !section) return;

      filesList.innerHTML = "";

      uploadedFiles.forEach((file, index) => {
        const fileCard = document.createElement("div");
        fileCard.style.cssText = `
            padding: 20px;
            background: rgba(255, 255, 255, 0.06);
            border: 1px solid rgba(99, 102, 241, 0.3);
            border-radius: 12px;
            display: flex;
            justify-content: space-between;
            align-items: center;
            transition: all 0.3s ease;
          `;

        fileCard.innerHTML = `
            <div style="flex: 1;">
              <div style="display: flex; align-items: center; gap: 12px; margin-bottom: 10px;">
                <span style="font-size: 28px;">üìÑ</span>
                <div>
                  <h4 style="color: #fff; margin: 0; font-weight: 600;">${file.name}</h4>
                  <p style="color: #999; margin: 5px 0 0 0; font-size: 13px;">
                    ${file.size} MB ‚Ä¢ ${file.date} ${file.time}
                  </p>
                </div>
              </div>
              <div style="padding-left: 40px; color: #999; font-size: 12px;">
                Type: ${file.type || "File"}
              </div>
            </div>
            <button onclick="removeFile(${index})" style="background: rgba(255, 107, 107, 0.2); border: 1px solid rgba(255, 107, 107, 0.5); color: #ff6b6b; padding: 8px 16px; border-radius: 8px; cursor: pointer; font-weight: 600; transition: all 0.3s ease;" onmouseover="this.style.background='rgba(255, 107, 107, 0.4)'" onmouseout="this.style.background='rgba(255, 107, 107, 0.2)'">
              üóëÔ∏è Remove
            </button>
          `;
        filesList.appendChild(fileCard);
      });

      section.style.display = uploadedFiles.length > 0 ? "block" : "none";
    }

    function removeFile(index) {
      uploadedFiles.splice(index, 1);
      if (uploadedFiles.length === 0) {
        const generateSection = document.getElementById("generateSection");
        const uploadedSection = document.getElementById(
          "uploadedFilesSection",
        );
        if (generateSection) generateSection.style.display = "none";
        if (uploadedSection) uploadedSection.style.display = "none";
      } else {
        displayUploadedFiles();
      }
    }

    function showFilesModal() {
      const modal = document.getElementById("filesModal");
      const listContainer = document.getElementById("filesModalList");
      if (!modal || !listContainer) return;

      listContainer.innerHTML = "";

      if (uploadedFiles.length === 0) {
        listContainer.innerHTML = `<div style="text-align: center; padding: 40px 20px; color: #999;"><div style="font-size: 48px; margin-bottom: 15px;">üì≠</div><p style="font-size: 16px;">No files uploaded yet</p></div>`;
      } else {
        uploadedFiles.forEach((file, index) => {
          const fileItem = document.createElement("div");
          fileItem.className = "files-modal-item";
          fileItem.innerHTML = `
              <div class="file-details">
                <div class="file-name">üìÑ ${file.name}</div>
                <div class="file-meta">
                  <div>Size: ${file.size} MB</div>
                  <div>Uploaded: ${file.date} ${file.time}</div>
                  <div style="color: #6366f1; margin-top: 5px;">Type: ${file.type || "File"}</div>
                </div>
              </div>
              <button onclick="removeFileFromModal(${index})" style="background: rgba(255, 107, 107, 0.2); border: 1px solid rgba(255, 107, 107, 0.5); color: #ff6b6b; padding: 8px 16px; border-radius: 8px; cursor: pointer; font-weight: 600; white-space: nowrap; margin-left: 15px;" onmouseover="this.style.background='rgba(255, 107, 107, 0.4)'" onmouseout="this.style.background='rgba(255, 107, 107, 0.2)'">üóëÔ∏è Remove</button>
            `;
          listContainer.appendChild(fileItem);
        });
      }
      modal.classList.add("active");
    }

    function closeFilesModal() {
      const modal = document.getElementById("filesModal");
      if (modal) modal.classList.remove("active");
    }

    function removeFileFromModal(index) {
      removeFile(index);
      showFilesModal();
    }

    function generateContent() {
      if (uploadedFiles.length > 0) {
        const fileName = uploadedFiles[uploadedFiles.length - 1].name;
        alert(
          `‚ú® Generating content from "${fileName}"...\n\nThis may take a few moments!`,
        );
        setTimeout(() => {
          alert(
            `‚úì Content generated successfully!\n\nYour materials are ready.`,
          );
        }, 2000);
      }
    }

    // ===== CHAT FUNCTIONS =====
    function toggleChatbot() {
      const chatbotBox = document.getElementById("chatbotBox");
      const chatbotToggle = document.getElementById("chatbotToggle");
      if (chatbotBox && chatbotToggle) {
        chatbotBox.classList.toggle("active");
        chatbotToggle.style.display = chatbotBox.classList.contains("active")
          ? "none"
          : "flex";
      }
    }

    function sendChatMessage() {
      const input = document.getElementById("chatbotInput");
      if (!input) return;
      const message = input.value.trim();
      if (message) {
        addChatMessage(message, "user");
        input.value = "";
        setTimeout(() => {
          const responses = [
            "That's a great question! ü§î",
            "I can explain this better.",
            "Would you like more help?",
            "Great progress! üåü",
          ];
          addChatMessage(
            responses[Math.floor(Math.random() * responses.length)],
            "bot",
          );
        }, 800);
      }
    }

    function handleChatMessage(event) {
      if (event.key === "Enter") sendChatMessage();
    }

    function addChatMessage(text, sender) {
      const messagesContainer = document.getElementById("chatbotMessages");
      if (!messagesContainer) return;
      const messageDiv = document.createElement("div");
      messageDiv.className = `message ${sender}`;
      messageDiv.textContent = text;
      messagesContainer.appendChild(messageDiv);
      messagesContainer.scrollTop = messagesContainer.scrollHeight;
    }

    // ===== USER PROFILE FUNCTIONS =====
    function updateStreak() {
      const streakEl = document.getElementById("streak");
      if (streakEl) streakEl.textContent = Math.floor(Math.random() * 30) + 1;
    }

    function updateUserProfile() {
      const userNameEl = document.getElementById("userName");
      if (!userNameEl) return;
      const userName = userNameEl.textContent;
      const userEmail = userName.toLowerCase() + "@edumorph.com";

      const profileId =
        "EDU-2026-" +
        String(Math.floor(Math.random() * 1000)).padStart(3, "0");
      const profilePoints = Math.floor(Math.random() * 5000) + 1000 + " XP";
      const profileCourses = Math.floor(Math.random() * 10) + 1;

      // Update sidebar profile
      const sidebarUserName = document.getElementById("sidebarUserName");
      const sidebarProfileId = document.getElementById("sidebarProfileId");
      const sidebarProfileJoined = document.getElementById(
        "sidebarProfileJoined",
      );
      const sidebarProfilePoints = document.getElementById(
        "sidebarProfilePoints",
      );
      const sidebarProfileCourses = document.getElementById(
        "sidebarProfileCourses",
      );

      if (sidebarUserName) sidebarUserName.textContent = userName;
      if (sidebarProfileId) sidebarProfileId.textContent = profileId;
      if (sidebarProfileJoined)
        sidebarProfileJoined.textContent = "January 2026";
      if (sidebarProfilePoints)
        sidebarProfilePoints.textContent = profilePoints;
      if (sidebarProfileCourses)
        sidebarProfileCourses.textContent = profileCourses;

      // Also update profile dropdown if it exists
      const profileName = document.getElementById("profileName");
      const profileEmail = document.getElementById("profileEmail");
      const profileIdDropdown = document.getElementById("profileId");
      const profileJoinedDropdown = document.getElementById("profileJoined");
      const profilePointsDropdown = document.getElementById("profilePoints");
      const profileCoursesDropdown =
        document.getElementById("profileCourses");

      if (profileName) profileName.textContent = userName;
      if (profileEmail) profileEmail.textContent = userEmail;
      if (profileIdDropdown) profileIdDropdown.textContent = profileId;
      if (profileJoinedDropdown)
        profileJoinedDropdown.textContent = "January 2026";
      if (profilePointsDropdown)
        profilePointsDropdown.textContent = profilePoints;
      if (profileCoursesDropdown)
        profileCoursesDropdown.textContent = profileCourses;

      // Populate profile page fields (full page view)
      const pName = document.getElementById("profilePageName");
      const pRole = document.getElementById("profilePageRole");
      const pId = document.getElementById("profilePageId");
      const pJoined = document.getElementById("profilePageJoined");
      const pPoints = document.getElementById("profilePagePoints");
      const pCourses = document.getElementById("profilePageCourses");
      const pLang = document.getElementById("profilePagePreferredLanguage");
      const pLib = document.getElementById("profilePageLibraryList");

      if (pName) pName.textContent = userName;
      if (pRole) pRole.textContent = "Learner";
      if (pId) pId.textContent = profileId;
      if (pJoined) pJoined.textContent = "January 2026";
      if (pPoints) pPoints.textContent = profilePoints;
      if (pCourses) pCourses.textContent = profileCourses;
      if (pLang)
        pLang.textContent =
          { en: "English", es: "Spanish", ta: "Tamil", hi: "Hindi" }[
          selectedLanguage
          ] ||
          selectedLanguage ||
          "English";

      if (pLib) {
        pLib.innerHTML = "";
        if (!uploadedFiles || uploadedFiles.length === 0) {
          const none = document.createElement("div");
          none.style.color = "#777";
          none.textContent = "No recent items";
          pLib.appendChild(none);
        } else {
          const recent = uploadedFiles.slice(-10).reverse();
          recent.forEach((f) => {
            const row = document.createElement("div");
            row.style.display = "flex";
            row.style.justifyContent = "space-between";
            row.style.alignItems = "center";
            row.style.gap = "8px";
            row.style.padding = "8px";
            row.style.borderRadius = "8px";
            row.style.background = "rgba(20,50,100,0.35)";
            const name = document.createElement("div");
            name.style.color = "#fff";
            name.style.fontSize = "14px";
            name.style.fontWeight = "600";
            name.textContent = f.name;
            const meta = document.createElement("div");
            meta.style.color = "#999";
            meta.style.fontSize = "12px";
            meta.textContent = `${f.size} MB`;
            row.appendChild(name);
            row.appendChild(meta);
            pLib.appendChild(row);
          });
        }
      }

      // Populate quick settings
      const profilePreferredLanguage = document.getElementById(
        "profilePreferredLanguage",
      );
      if (profilePreferredLanguage) {
        // map common codes to readable names if needed
        const langMap = {
          en: "English",
          es: "Spanish",
          ta: "Tamil",
          hi: "Hindi",
        };
        profilePreferredLanguage.textContent =
          langMap[selectedLanguage] || selectedLanguage || "English";
      }

      // Populate recent library items inside profile (uses uploadedFiles global)
      const libList = document.getElementById("profileLibraryList");
      if (libList) {
        libList.innerHTML = "";
        if (!uploadedFiles || uploadedFiles.length === 0) {
          const none = document.createElement("div");
          none.style.color = "#777";
          none.textContent = "No recent items";
          libList.appendChild(none);
        } else {
          // show up to 5 recent items
          const recent = uploadedFiles.slice(-5).reverse();
          recent.forEach((f) => {
            const row = document.createElement("div");
            row.style.display = "flex";
            row.style.justifyContent = "space-between";
            row.style.alignItems = "center";
            row.style.gap = "8px";
            const name = document.createElement("div");
            name.style.color = "#fff";
            name.style.fontSize = "13px";
            name.style.fontWeight = "600";
            name.textContent = f.name;
            const meta = document.createElement("div");
            meta.style.color = "#999";
            meta.style.fontSize = "12px";
            meta.textContent = `${f.size} MB`;
            row.appendChild(name);
            row.appendChild(meta);
            libList.appendChild(row);
          });
        }
      }
    }

    // Toggle profile dropdown visibility
    function toggleProfileDropdown() {
      const dropdown = document.getElementById("userProfileDropdown");
      if (!dropdown) return;
      dropdown.classList.toggle("active");
    }

    // Set application language, update UI and persist preference
    function setAppLanguage(lang) {
      selectedLanguage = lang;
      const langMap = {
        en: "English",
        es: "Spanish",
        ta: "Tamil",
        hi: "Hindi",
      };
      const human = langMap[lang] || lang;

      const spanSmall = document.getElementById("profilePreferredLanguage");
      const spanPage = document.getElementById(
        "profilePagePreferredLanguage",
      );
      if (spanSmall) spanSmall.textContent = human;
      if (spanPage) spanPage.textContent = human;

      const selSmall = document.getElementById(
        "profilePreferredLanguageSelect",
      );
      const selPage = document.getElementById(
        "profilePagePreferredLanguageSelect",
      );
      const selSettings = document.getElementById("settingsLanguageSelect");
      if (selSmall) selSmall.value = lang;
      if (selPage) selPage.value = lang;
      if (selSettings) selSettings.value = lang;

      try {
        localStorage.setItem("edumorph_lang", lang);
      } catch (e) {
        // ignore
      }
    }

    function logout() {
      window.location.href = "";
    }

    // ===== EVENT LISTENERS =====
    document.addEventListener("click", function (event) {
      // Close files modal when clicking outside
      const filesModal = document.getElementById("filesModal");
      const filesContent = document.querySelector(".files-modal-content");
      if (
        filesModal &&
        filesContent &&
        filesModal.classList.contains("active") &&
        !filesContent.contains(event.target)
      ) {
        closeFilesModal();
      }

      // Close profile dropdown when clicking outside avatar/dropdown
      const profileDropdown = document.getElementById("userProfileDropdown");
      const avatarBtn = document.getElementById("userAvatarBtn");
      if (profileDropdown && profileDropdown.classList.contains("active")) {
        const insideDropdown = profileDropdown.contains(event.target);
        const clickedAvatar = avatarBtn && avatarBtn.contains(event.target);
        if (!insideDropdown && !clickedAvatar) {
          profileDropdown.classList.remove("active");
        }
      }
    });

    // ===== INITIALIZATION =====
    window.addEventListener("load", () => {
      updateStreak();
      const dashboardSection = document.getElementById("dashboardSection");
      if (dashboardSection) dashboardSection.classList.add("active");
      const userNameEl = document.getElementById("userName");
      if (userNameEl) userNameEl.textContent = "Student";
      // load preferred language from localStorage if available
      try {
        const stored = localStorage.getItem("edumorph_lang");
        if (stored) selectedLanguage = stored;
      } catch (e) {
        // ignore
      }

      updateUserProfile();
      // ensure selects and displays are synced
      setAppLanguage(selectedLanguage || "en");
    });
  </script>
</body>

</html>